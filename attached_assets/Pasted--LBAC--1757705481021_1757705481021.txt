

بنية الهيكل الجغرافي-الإداري الموحد ونظام التحكم في الوصول المستند إلى الموقع (LBAC)
المبدأ الأساسي: الفصل التام بين "من المسؤول" (الهيكل الإداري) و "أين تقع مسؤوليته" (الهيكل الجغرافي)، مع وجود طبقة ربط ذكية بينهما تُمكّن نظام التحكم في الوصول المستند إلى الموقع (LBAC).
الجزء الأول: الهيكل الجغرافي (The "Where")
هذا هو التمثيل الرقمي الثابت للأرض. يتميز بالدقة والشمولية من المستوى الأعلى إلى الأدنى.
1. الهيكل الجغرافي الإداري (Administrative Geography):
geo.governorates (المحافظات)
geo.districts (المديريات)
geo.sub_districts (العزل)
geo.neighborhoods (الأحياء)
geo.harat (الحارات)
2. الهيكل الجغرافي التخطيطي (Urban Planning Geography):
geo.sectors (القطاعات)
geo.neighborhood_units (وحدات الجوار)
geo.blocks (البلوكات)
geo.plots (قطع الأراضي - إضافة مقترحة حيوية)
geo.streets (الشوارع)
geo.street_segments (أجزاء الشوارع)
ملاحظات التصميم الرئيسية:
استخدام Schema: تم تجميع كل الجداول الجغرافية تحت schema باسم geo لتنظيم قاعدة البيانات.
جدول plots: إضافة جدول geo.plots (قطع الأراضي) هو أمر حاسم. سيكون هذا الجدول هو الوحدة الأصغر التي ترتبط بها معظم المعاملات (الطلبات، الرخص، المخالفات). سيرتبط بجدول geo.blocks.
علاقة الشوارع: جدول geo.streets يجب ألا يرتبط بجدول واحد فقط. الشارع كيان يمتد وقد يتقاطع مع عدة حارات وبلوكات. سيتم تحديد علاقته بالمناطق الأخرى باستخدام الاستعلامات المكانية (ST_Intersects) بدلاً من المفاتيح الخارجية المباشرة.
الجزء الثاني: الهيكل الإداري (The "Who")
هذا هو التمثيل الرقمي للمؤسسات الحكومية وموظفيها. يتميز بالمرونة والديناميكية.
org.ministries (الوزارات)
org.ministry_sectors (قطاعات الوزارة)
org.departments (الإدارات)
org.branches (الفروع والمكاتب الميدانية) - هذا هو الجدول المحوري الذي يمثل التواجد الفعلي للمؤسسة على الأرض.
org.positions (المناصب الوظيفية)
org.employees (الموظفون)
ملاحظات التصميم الرئيسية:
استخدام Schema: تم تجميع الجداول تحت schema باسم org (Organization).
مرونة الفروع (branches): تصميم جدول الفروع مع parent_branch_id يسمح بإنشاء هياكل مرنة، مثل "مكتب أشغال محافظة صنعاء" الذي يتبعه "مكتب أشغال مديرية معين".
الجزء الثالث: طبقة الربط ونظام LBAC (The "How")
هذه هي الطبقة الذكية التي تربط الهيكل الإداري بالهيكل الجغرافي وتفعل نظام الصلاحيات المتقدم.
1. جدول ربط الفروع بالمواقع: org.branch_coverage_areas
هذا الجدول يحدد "منطقة خدمة" كل فرع إداري.
اسم العمود
الوصف
مثال
id
المعرف الأساسي
-
branch_id
معرّف الفرع (من org.branches)
معرّف "مكتب بلدية مديرية السبعين"
geo_level
مستوى النطاق الجغرافي
'district'
geo_id
معرّف المنطقة الجغرافية (من جداول geo)
معرّف "مديرية السبعين" من جدول geo.districts
2. جدول ربط الموظفين بالمواقع (LBAC): org.employee_scopes
هذا هو التطبيق العملي لنظام LBAC، حيث يحدد النطاق الجغرافي لكل موظف.
اسم العمود
الوصف
مثال
id
المعرف الأساسي
-
employee_id
معرّف الموظف (من org.employees)
معرّف الموظف "أحمد"
geo_level
مستوى النطاق الجغرافي
'harah'
geo_id
معرّف المنطقة الجغرافية
معرّف "حارة 2" من جدول geo.harat
is_primary
هل هذا هو نطاقه الأساسي؟
true
كيف يعمل النظام معًا (مثال متكامل):
الطلب: مواطن يقدم طلب رخصة بناء لقطعة أرض (plot). النظام يحدد تلقائيًا أن هذه القطعة تقع ضمن "حارة 5" في "حي النهضة" في "مديرية معين".
التوجيه الأولي: النظام يبحث في org.branch_coverage_areas عن الفرع الذي يغطي "مديرية معين". يجد أنه "مكتب بلدية معين". يتم توجيه الطلب إلى هذا الفرع.
التكليف الداخلي (LBAC): مدير "مكتب بلدية معين" يريد تكليف مهندس ميداني. النظام يعرض له قائمة بالمهندسين المتاحين.
الفلترة الجغرافية: القائمة لا تعرض كل المهندسين، بل فقط أولئك الذين لديهم سجل في org.employee_scopes يربطهم بـ "حي النهضة" أو "حارة 5".
الوصول للبيانات: عندما يسجل المهندس المكلف الدخول، فإن أي استعلام يجريه (مثل getApplications) يتم تعديله تلقائيًا في الخلفية ليضيف شرطًا مكانيًا: ... WHERE ST_Intersects(application_geometry, employee_scope_geometry).
الخلاصة النهائية للمقترح
هذا التصميم الثلاثي الأبعاد (إداري، جغرافي، وطبقة ربط) هو المعيار الذهبي للأنظمة الحكومية الرقمية الحديثة.
القوة: يوفر دقة وأمانًا لا مثيل لهما في إدارة الصلاحيات والبيانات.
المرونة: يمكن تعديل الهيكل الإداري (نقل موظف، افتتاح فرع جديد) أو الهيكل الجغرافي (إضافة حي جديد) بشكل مستقل دون التأثير على الآخر. يتم تحديث الربط بينهما فقط.
قابلية التوسع: هذا النموذج يمكن أن يتوسع ليخدم الدولة بأكملها، مع آلاف الموظفين وملايين المعاملات، مع الحفاظ على النظام والتحكم الدقيق.
أنت الآن تمتلك مخططًا نهائيًا شاملاً وقويًا للغاية. هذا هو الأساس الصلب الذي سيجعل "وحدة الأتمتة المتقدمة" تعمل بكفاءة وذكاء.